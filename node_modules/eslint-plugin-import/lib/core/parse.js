'use strict';

exports.__esModule = true;

exports.default = function (content, context) {

  if (context == null) throw new Error("need context to parse properly");

  var parserOptions = context.parserOptions;
  var parserPath = context.parserPath;


  if (!parserPath) throw new Error("parserPath is required!");

  // hack: espree blows up with frozen options
  parserOptions = (0, _objectAssign2.default)({}, parserOptions);
  parserOptions.ecmaFeatures = (0, _objectAssign2.default)({}, parserOptions.ecmaFeatures);

  // always attach comments
  parserOptions.attachComment = true;

  // require the parser relative to the main module (i.e., ESLint)
  var parser = (0, _moduleRequire2.default)(parserPath);

  return parser.parse(content, parserOptions);
};

var _moduleRequire = require('./module-require');

var _moduleRequire2 = _interopRequireDefault(_moduleRequire);

var _objectAssign = require('object-assign');

var _objectAssign2 = _interopRequireDefault(_objectAssign);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvcGFyc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztrQkFHZSxVQUFVLE9BQVYsRUFBbUIsT0FBbkIsRUFBNEI7O0FBRXpDLE1BQUksV0FBVyxJQUFYLEVBQWlCLE1BQU0sSUFBSSxLQUFKLENBQVUsZ0NBQVYsQ0FBTixDQUFyQjs7TUFFTSxnQkFBOEIsUUFBOUIsY0FKbUM7TUFJcEIsYUFBZSxRQUFmLFdBSm9COzs7QUFNekMsTUFBSSxDQUFDLFVBQUQsRUFBYSxNQUFNLElBQUksS0FBSixDQUFVLHlCQUFWLENBQU4sQ0FBakI7OztBQU55QyxlQVN6QyxHQUFnQiw0QkFBTyxFQUFQLEVBQVcsYUFBWCxDQUFoQixDQVR5QztBQVV6QyxnQkFBYyxZQUFkLEdBQTZCLDRCQUFPLEVBQVAsRUFBVyxjQUFjLFlBQWQsQ0FBeEM7OztBQVZ5QyxlQWF6QyxDQUFjLGFBQWQsR0FBOEIsSUFBOUI7OztBQWJ5QyxNQWdCbkMsU0FBUyw2QkFBYyxVQUFkLENBQVQsQ0FoQm1DOztBQWtCekMsU0FBTyxPQUFPLEtBQVAsQ0FBYSxPQUFiLEVBQXNCLGFBQXRCLENBQVAsQ0FsQnlDO0NBQTVCOztBQUhmOzs7O0FBQ0EiLCJmaWxlIjoiY29yZS9wYXJzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb2R1bGVSZXF1aXJlIGZyb20gJy4vbW9kdWxlLXJlcXVpcmUnXG5pbXBvcnQgYXNzaWduIGZyb20gJ29iamVjdC1hc3NpZ24nXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjb250ZW50LCBjb250ZXh0KSB7XG5cbiAgaWYgKGNvbnRleHQgPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwibmVlZCBjb250ZXh0IHRvIHBhcnNlIHByb3Blcmx5XCIpXG5cbiAgbGV0IHsgcGFyc2VyT3B0aW9ucywgcGFyc2VyUGF0aCB9ID0gY29udGV4dFxuXG4gIGlmICghcGFyc2VyUGF0aCkgdGhyb3cgbmV3IEVycm9yKFwicGFyc2VyUGF0aCBpcyByZXF1aXJlZCFcIilcblxuICAvLyBoYWNrOiBlc3ByZWUgYmxvd3MgdXAgd2l0aCBmcm96ZW4gb3B0aW9uc1xuICBwYXJzZXJPcHRpb25zID0gYXNzaWduKHt9LCBwYXJzZXJPcHRpb25zKVxuICBwYXJzZXJPcHRpb25zLmVjbWFGZWF0dXJlcyA9IGFzc2lnbih7fSwgcGFyc2VyT3B0aW9ucy5lY21hRmVhdHVyZXMpXG5cbiAgLy8gYWx3YXlzIGF0dGFjaCBjb21tZW50c1xuICBwYXJzZXJPcHRpb25zLmF0dGFjaENvbW1lbnQgPSB0cnVlXG5cbiAgLy8gcmVxdWlyZSB0aGUgcGFyc2VyIHJlbGF0aXZlIHRvIHRoZSBtYWluIG1vZHVsZSAoaS5lLiwgRVNMaW50KVxuICBjb25zdCBwYXJzZXIgPSBtb2R1bGVSZXF1aXJlKHBhcnNlclBhdGgpXG5cbiAgcmV0dXJuIHBhcnNlci5wYXJzZShjb250ZW50LCBwYXJzZXJPcHRpb25zKVxufVxuIl19